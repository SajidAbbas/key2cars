/*
 *
 * Copyright (c) 2006-2014 Sam Collett (http://www.texotela.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version 1.4.1
 * Demo: http://www.texotela.co.uk/code/jquery/numeric/
 *
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){e.fn.numeric=function(t,i){"boolean"==typeof t&&(t={decimal:t,negative:!0,decimalPlaces:-1}),t=t||{},"undefined"==typeof t.negative&&(t.negative=!0);var n=t.decimal===!1?"":t.decimal||".",s=t.negative===!0?!0:!1,a="undefined"==typeof t.decimalPlaces?-1:t.decimalPlaces;return i="function"==typeof i?i:function(){},this.data("numeric.decimal",n).data("numeric.negative",s).data("numeric.callback",i).data("numeric.decimalPlaces",a).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var i=e.data(this,"numeric.decimal"),n=e.data(this,"numeric.negative"),s=e.data(this,"numeric.decimalPlaces"),a=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==a&&"input"==this.nodeName.toLowerCase())return!0;if(13==a)return!1;var r=!1;if(t.ctrlKey&&97==a||t.ctrlKey&&65==a)return!0;if(t.ctrlKey&&120==a||t.ctrlKey&&88==a)return!0;if(t.ctrlKey&&99==a||t.ctrlKey&&67==a)return!0;if(t.ctrlKey&&122==a||t.ctrlKey&&90==a)return!0;if(t.ctrlKey&&118==a||t.ctrlKey&&86==a||t.shiftKey&&45==a)return!0;if(48>a||a>57){var o=e(this).val();if(0!==e.inArray("-",o.split(""))&&n&&45==a&&(0===o.length||0===parseInt(e.fn.getSelectionStart(this),10)))return!0;i&&a==i.charCodeAt(0)&&-1!=e.inArray(i,o.split(""))&&(r=!1),8!=a&&9!=a&&13!=a&&35!=a&&36!=a&&37!=a&&39!=a&&46!=a?r=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!==t.which?(r=!0,46==t.which&&(r=!1)):0!==t.keyCode&&0===t.charCode&&0===t.which&&(r=!0)),i&&a==i.charCodeAt(0)&&(r=-1==e.inArray(i,o.split(""))?!0:!1)}else if(r=!0,i&&s>0){var l=e.inArray(i,e(this).val().split(""));l>=0&&e(this).val().length>l+s&&(r=!1)}return r},e.fn.numeric.keyup=function(){var t=e(this).val();if(t&&t.length>0){var i=e.fn.getSelectionStart(this),n=e.fn.getSelectionEnd(this),s=e.data(this,"numeric.decimal"),a=e.data(this,"numeric.negative"),r=e.data(this,"numeric.decimalPlaces");if(""!==s&&null!==s){var o=e.inArray(s,t.split(""));0===o&&(this.value="0"+t,i++,n++),1==o&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1),i++,n++),t=this.value}for(var l=[0,1,2,3,4,5,6,7,8,9,"-",s],u=t.length,h=u-1;h>=0;h--){var d=t.charAt(h);0!==h&&"-"==d?t=t.substring(0,h)+t.substring(h+1):0!==h||a||"-"!=d||(t=t.substring(1));for(var c=!1,p=0;p<l.length;p++)if(d==l[p]){c=!0;break}c&&" "!=d||(t=t.substring(0,h)+t.substring(h+1))}var f=e.inArray(s,t.split(""));if(f>0)for(var g=u-1;g>f;g--){var m=t.charAt(g);m==s&&(t=t.substring(0,g)+t.substring(g+1))}if(s&&r>0){var o=e.inArray(s,t.split(""));o>=0&&(t=t.substring(0,o+r+1),n=Math.min(t.length,n))}this.value=t,e.fn.setSelection(this,[i,n])}},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.callback"),n=e.data(this,"numeric.negative"),s=this.value;if(""!==s){var a=new RegExp("^"+(n?"-?":"")+"\\d+$|^"+(n?"-?":"")+"\\d*"+t+"\\d+$");a.exec(s)||i.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",e.fn.numeric.keypress).unbind("keyup",e.fn.numeric.keyup).unbind("blur",e.fn.numeric.blur)},e.fn.getSelectionStart=function(e){if("number"===e.type)return void 0;if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:Math.max(0,e.value.lastIndexOf(t.text))}try{return e.selectionStart}catch(i){return 0}},e.fn.getSelectionEnd=function(e){if("number"===e.type)return void 0;if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd},e.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if("number"===e.type)e.focus();else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",t[0]),i.moveEnd("character",t[1]-t[0]),i.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(n){}}}});