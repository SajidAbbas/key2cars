$(function(){function filterOptions(e){function t(e){var t=[];for(i in e)t[i]=e[i]+" "+unit;return t}function n(){var e=parseInt($("#pr_from").val()),t=parseInt($("#pr_to").typeahead("val"));if(!e)return default_vals;var n=[],e=!t||e>t?e:t;for(i=1;6>=i;i++)n.push(e+5*i);return n}return function(i,s){var a=e?default_vals:n();return s(t(a))}}function updateRangewidgetLabel(){var e=$("#pr_from").val(),t=$("#pr_to").val();return e||t?(e||(e=0),$(".pr-text").html(e+" "+unit+" - "+(t?t+" "+unit:"")),void 0):($(".pr-text").html(translate_string("Price Range")),void 0)}var tt_change_events="keyup mousedown typeahead:selected typeahead:change",range_vals=$(".pr-input-container").data("range-values"),range_unit=$(".pr-input-container").data("range-unit"),default_vals=range_vals?eval(range_vals):[5,10,15,20,25,30],opt_selected=!1,unit=range_unit?range_unit:translate_string("Lacs"),opts={hint:!1,minLength:0,highlight:!1};$("#pr_from").typeahead(opts,{source:filterOptions(!0),limit:6}),$("#pr_to").typeahead(opts,{source:filterOptions(!1),limit:6}),$("#pr_to, #pr_from").numeric().on("typeahead:selected",function(e,t){$(this).typeahead("val",t.replace(unit,"").trim()),opt_selected=!0}).on(tt_change_events,updateRangewidgetLabel).on("click",function(){$(this).focus()}),$("#pr_from").on("typeahead:selected",function(){var e=$("#pr_to").typeahead("val");$("#pr_to").typeahead("val","_").typeahead("val",e).focus()}).numeric(),$("#pr_to").on("typeahead:selected",function(){$(".pr-range").hide(),0!=$("#more_option_detail").length&&$("#more_option_detail").is(":visible")||$("#home-search-btn").focus()}),$("#home-search-btn").on("focus",function(){$(".pr-range").hide()}),$("#pr-range-filter").on("focus",function(){$(".pr-range").toggle().is(":visible")?$("#pr_from").focus():$(".search-classified").focus()}),$("body").click(function(e){0!=$(e.target).closest(".range-widget").length||opt_selected||$(".pr-range").hide(),opt_selected=!1}),$("#home-query").autocomplete({source:("bike"==$("#home-query").data("pw-source")?bike_manufacturer_model_search:car_manufacturer_model_search).sort(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}),messages:{noResults:"",results:function(){}},open:function(){$(this).data("autocomplete").menu.element.addClass($("#home-query").data("autocomplete-class"))},select:function(e,t){var i=t.item.id.toString().split(",");2==i.length?($("#UsedManID").val(i[0]),$("#UsedModelID").val(i[1]).trigger("change")):$("#UsedManID").val(i[0]).trigger("change")}}).on("change",function(){$("#UsedManID, #UsedModelID").trigger("change")}),$("#home-query").keypress(function(e){13==e.which&&$("#home-search-btn").trigger("click")})});